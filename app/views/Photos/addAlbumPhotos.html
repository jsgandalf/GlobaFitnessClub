#{extends 'main.html' /}
#{set title:'Globa Fitness Photos' /}
#{set 'moreScripts'}
    <script type="text/javascript" src="@{'/public/javascripts/jquery.galleriffic.js'}"></script>
    <script type="text/javascript" src="@{'/public/javascripts/jquery.opacityrollover.js'}"></script>
#{/set}
#{set 'moreStyles'}
    <link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/trainer.css'}" />
    <link rel="stylesheet" href="@{'/public/stylesheets/galleriffic-2.css'}" type="text/css" />
    <!--<link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/fileuploader.css'}">-->
#{/set}
<div class="photo_gallery">
    <div class="profile_banner">
        <div class="profile_banner_col1">
            <div class="left_pad">
                <h1>Complete your Profile to maximize your trainer search</h1>
                <p>A professional profile is vital to finding a trainer to match your needs.  Once you have completed your profile, it will be much easier to match a trainer to your specific needs .</p>
            </div>
        </div>
        <div class="profile_banner_col2">
            <p class="pad_five">Complete your Profile to maximize your trainer finding opportunities</p>
        </div>
    </div>

    <h2 class="showAlbum">Add photos to Album ${currentAlbum?.title}</h2>
    <div style="float:left; margin-top:9px;"><a style="font-size:12px" class="submit2" href="@{Photos.index()}">Back to Albums</a></div>
    <div class="deleteAlbum">
        <a class="submit2" href="@{Photos.deleteAlbum(currentAlbum.id)}">Delete Album</a>
    </div>
    <div class="clear"></div>
    #{if flash.error}
    <div style="float:left; width:100%">
    <p class="fError">
        <strong>${flash.error}</strong>
    </p>
    </div>
    #{/if}
    #{if flash.success}
    <p class="fSuccess">
        <strong>${flash.success}</strong>
    </p>
    #{/if}

    #{ifErrors}
    <p class="error">
        ${errors[0]}
    </p>
    #{/ifErrors}
    <div class="addPhotoToAlbum">
        #{form @uploadPhotoToAlbum(), enctype:'multipart/form-data'}
            <ol>
                #{field 'photo_title'}
                <li>
                    <label for="name">Title:</label>
                    <input id="name" type="text" class="text" name="${field.name}" value="${photo_title}" />
                </li>
                #{/field}
                #{field 'message'}
                <li>
                    <label for="name">Message:</label>
                    <textarea id="message" class="text" name="${field.name}">${message}</textarea>
                </li>
                <li>
                    <label for="name">Upload Photo:</label>
                    <input type="file" name="photo" id="photo" />
                    <input type="hidden" name="albumID" value="${currentAlbum?.id}" />
                </li>
                <li style="margin-top:10px;">
                    <input type="submit" name="submit" value="Upload" class="submit2">
                </li>
            </ol>
        #{/field}
    </div>
    <!--<div id="profile_save"><input id="addMoreFiles" name="submit" value="Add more files" class="submit2"></div>-->
    #{/form}
    <br>

    #{if currentAlbum?.pictures?.size()}
    <div id="gallery" class="content" style="float:right">
        <div id="controls" class="controls"></div>
        <div class="slideshow-container">
            <div id="loading" class="loader"></div>
            <div id="slideshow" class="slideshow"></div>
        </div>
        <div id="caption" class="caption-container"></div>
    </div>
    <div id="thumbs" class="navigation">
        #{display_pictures albums:currentAlbum /}
    </div>
    <script type="text/javascript">
        jQuery(document).ready(function($) {
        // We only want these styles applied when javascript is enabled
        $('div.navigation').css({'width' : '300px', 'float' : 'left'});
        $('div.content').css('display', 'block');

        // Initially set opacity on thumbs and add
        // additional styling for hover effect on thumbs
        var onMouseOutOpacity = 0.67;
        $('#thumbs ul.thumbs li').opacityrollover({
        mouseOutOpacity:   onMouseOutOpacity,
        mouseOverOpacity:  1.0,
        fadeSpeed:         'fast',
        exemptionSelector: '.selected'
        });

        // Initialize Advanced Galleriffic Gallery
        var gallery = $('#thumbs').galleriffic({
        delay:                     2500,
        numThumbs:                 15,
        preloadAhead:              10,
        enableTopPager:            true,
        enableBottomPager:         true,
        maxPagesToShow:            7,
        imageContainerSel:         '#slideshow',
        controlsContainerSel:      '#controls',
        captionContainerSel:       '#caption',
        loadingContainerSel:       '#loading',
        renderSSControls:          true,
        renderNavControls:         true,
        playLinkText:              'Play Slideshow',
        pauseLinkText:             'Pause Slideshow',
        prevLinkText:              '&lsaquo; Previous Photo',
        nextLinkText:              'Next Photo &rsaquo;',
        nextPageLinkText:          'Next &rsaquo;',
        prevPageLinkText:          '&lsaquo; Prev',
        enableHistory:             false,
        autoStart:                 false,
        syncTransitions:           true,
        defaultTransitionDuration: 900,
        onSlideChange:             function(prevIndex, nextIndex) {
        // 'this' refers to the gallery, which is an extension of $('#thumbs')
        this.find('ul.thumbs').children()
        .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
        .eq(nextIndex).fadeTo('fast', 1.0);
        },
        onPageTransitionOut:       function(callback) {
        this.fadeTo('fast', 0.0, callback);
        },
        onPageTransitionIn:        function() {
        this.fadeTo('fast', 1.0);
        }
        });
        });
    </script>
    #{/if}
    #{else}
    <div style="margin-top:10px"><p>You have not uploaded any pictures yet</p></div>
    #{/else}
    <div class="clear"></div>
</div>
<div class="clear"></div>
</div>
</div>

        <!---<div id="file-uploader">
            <noscript>
                <p>Please enable JavaScript to use file uploader.</p>
            </noscript>

            <script type="text/javascript">
                function createUploader(){
                var uploader = new qq.FileUploader({
                element: document.getElementById('file-uploader'),
                action: '/upload',
                debug: true
                });
                }

                // in your app create uploader as soon as the DOM is ready
                // don't wait for the window to load
                window.onload = createUploader;
            </script></div>
              <script type="text/javascript">
    $('#addMoreFiles').click(function(){
        //$('#addMoreFilesContent').load('{display_upload()}');
        /*$.get('{display_upload()}',function(data){
            $("#addMoreFilesContent").append(data);
        },'html');*/
        $("#addMoreFilesContent").append('<input type="file" name="photos" /><br>');
    });
</script>


              --->


